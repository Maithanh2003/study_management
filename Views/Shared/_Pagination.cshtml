@model dynamic
@{
    string action = ViewData["Action"]?.ToString() ?? "Index";
    var routeValues = ViewData["RouteValues"] as Dictionary<string, string> ?? new Dictionary<string, string>();

    // Remove pagination parameters to avoid duplication
    routeValues.Remove("PageNumber");
    routeValues.Remove("pageNumber");
}

@if (Model.TotalPages > 1)
{
    <nav class="mt-4" aria-label="Pagination">
        <ul class="pagination justify-content-center">

            <!-- First Page -->
            <li class="page-item @(Model.CurrentPage == 1 ? "disabled" : "")">
                <a class="page-link" asp-action="@action" asp-route-PageNumber="1" asp-all-route-data="routeValues">
                    <span>&laquo;&laquo;</span>
                </a>
            </li>

            <!-- Previous Page -->
            <li class="page-item @(!Model.HasPrevious ? "disabled" : "")">
                <a class="page-link" asp-action="@action" asp-route-PageNumber="@(Model.CurrentPage - 1)"
                    asp-all-route-data="routeValues">
                    <span>&laquo;</span>
                </a>
            </li>

            <!-- Page Numbers -->
            @{
                int start = Math.Max(1, Model.CurrentPage - 2);
                int end = Math.Min(Model.TotalPages, Model.CurrentPage + 2);

                if (start > 1)
                {
                    <li class="page-item disabled"><span class="page-link">...</span></li>
                }

                for (int i = start; i <= end; i++)
                {
                    <li class="page-item @(i == Model.CurrentPage ? "active" : "")">
                        <a class="page-link" asp-action="@action" asp-route-PageNumber="@i" asp-all-route-data="routeValues">@i</a>
                    </li>
                }

                if (end < Model.TotalPages)
                {
                    <li class="page-item disabled"><span class="page-link">...</span></li>
                }
            }

            <!-- Next Page -->
            <li class="page-item @(!Model.HasNext ? "disabled" : "")">
                <a class="page-link" asp-action="@action" asp-route-PageNumber="@(Model.CurrentPage + 1)"
                    asp-all-route-data="routeValues">
                    <span>&raquo;</span>
                </a>
            </li>

            <!-- Last Page -->
            <li class="page-item @(Model.CurrentPage == Model.TotalPages ? "disabled" : "")">
                <a class="page-link" asp-action="@action" asp-route-PageNumber="@Model.TotalPages"
                    asp-all-route-data="routeValues">
                    <span>&raquo;&raquo;</span>
                </a>
            </li>
        </ul>
    </nav>
}
